<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§ì¶¤ êµ¬êµ¬ë‹¨ ì—°ìŠµ ê²Œì„</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f4f7f6;
            text-align: center;
        }
        .container {
            background-color: #ffffff;
            padding: 30px 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            width: 90%;
            max-width: 450px;
        }
        h1 {
            color: #005a9c;
            margin-bottom: 25px;
        }

        /* --- ì„¤ì • í™”ë©´ ìŠ¤íƒ€ì¼ --- */
        #settings-container h2 {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 20px;
        }
        #dan-selection {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
        }
        #dan-selection label {
            display: block;
            padding: 10px 15px;
            border: 1px solid #ccc;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        #dan-selection input[type="checkbox"] {
            display: none; /* ì‹¤ì œ ì²´í¬ë°•ìŠ¤ëŠ” ìˆ¨ê¹€ */
        }
        /* ì‚¬ìš©ìê°€ ì²´í¬ë°•ìŠ¤ë¥¼ ì„ íƒí–ˆì„ ë•Œ ë¼ë²¨ ìŠ¤íƒ€ì¼ ë³€ê²½ */
        #dan-selection input[type="checkbox"]:checked + span {
            color: #fff;
            font-weight: bold;
        }
        #dan-selection input[type="checkbox"]:checked + span::before {
            content: 'âœ” ';
        }
        #dan-selection label:has(input:checked) {
            background-color: #007bff;
            border-color: #007bff;
        }

        /* --- ê²Œì„ í™”ë©´ ìŠ¤íƒ€ì¼ --- */
        #game-container {
            display: none; /* ì²˜ìŒì—ëŠ” ê²Œì„ í™”ë©´ì„ ìˆ¨ê¹€ */
        }
        #problem-area {
            font-size: 3.2em;
            font-weight: bold;
            margin: 25px 0;
            color: #333;
            height: 65px;
        }
        #answer-input {
            width: calc(100% - 24px);
            padding: 12px;
            margin-bottom: 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1.5em;
            text-align: center;
            transition: border-color 0.3s ease;
        }
        #answer-input:focus {
            border-color: #007bff;
            outline: none;
        }
        .button-group {
            display: flex;
            gap: 10px;
        }
        .button {
            flex-grow: 1;
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        #submit-button {
            background-color: #28a745;
            color: white;
        }
        #submit-button:hover { background-color: #218838; }
        #reset-button, #start-button {
            background-color: #6c757d;
            color: white;
        }
        #reset-button:hover, #start-button:hover { background-color: #5a6268; }

        #result-message {
            margin-top: 20px;
            font-size: 1.2em;
            font-weight: bold;
            height: 30px;
        }
        .correct { color: #28a745; }
        .incorrect { color: #dc3545; }
    </style>
</head>
<body>

    <div class="container">
        <!-- ì„¤ì • í™”ë©´ -->
        <div id="settings-container">
            <h1>ë§ì¶¤ êµ¬êµ¬ë‹¨ ì—°ìŠµ</h1>
            <h2>ì—°ìŠµí•  êµ¬êµ¬ë‹¨ì„ ì„ íƒí•˜ì„¸ìš”.</h2>
            <div id="dan-selection">
                <!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ 2ë‹¨ë¶€í„° 9ë‹¨ê¹Œì§€ ì²´í¬ë°•ìŠ¤ ìƒì„± -->
            </div>
            <button id="start-button" class="button">ì—°ìŠµ ì‹œì‘í•˜ê¸°</button>
        </div>

        <!-- ê²Œì„ í™”ë©´ -->
        <div id="game-container">
            <h1>êµ¬êµ¬ë‹¨ ì—°ìŠµ</h1>
            <div id="problem-area"></div>
            <form onsubmit="checkAnswer(); return false;">
                <input type="number" id="answer-input" required autocomplete="off" placeholder="ì •ë‹µ">
                <div class="button-group">
                    <button type="button" id="reset-button" class="button">ë‹¨ ì„ íƒìœ¼ë¡œ</button>
                    <button type="submit" id="submit-button" class="button">ì •ë‹µ í™•ì¸</button>
                </div>
            </form>
            <div id="result-message"></div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜ ì„ ì–¸
        const settingsContainer = document.getElementById('settings-container');
        const gameContainer = document.getElementById('game-container');
        const danSelection = document.getElementById('dan-selection');
        const startButton = document.getElementById('start-button');
        const resetButton = document.getElementById('reset-button');
        const problemArea = document.getElementById('problem-area');
        const answerInput = document.getElementById('answer-input');
        const resultMessage = document.getElementById('result-message');
        
        let selectedDans = [];
        let currentAnswer;
        let currentProblem = {};

        // 2ë‹¨ë¶€í„° 9ë‹¨ê¹Œì§€ ì²´í¬ë°•ìŠ¤ ë™ì  ìƒì„±
        for (let i = 2; i <= 9; i++) {
            const label = document.createElement('label');
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.value = i;
            const span = document.createElement('span');
            span.textContent = `${i}ë‹¨`;
            label.appendChild(checkbox);
            label.appendChild(span);
            danSelection.appendChild(label);
        }

        // "ì—°ìŠµ ì‹œì‘í•˜ê¸°" ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        startButton.addEventListener('click', () => {
            selectedDans = Array.from(danSelection.querySelectorAll('input:checked')).map(cb => parseInt(cb.value));
            
            if (selectedDans.length === 0) {
                alert('ì—°ìŠµí•  êµ¬êµ¬ë‹¨ì„ í•˜ë‚˜ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }

            settingsContainer.style.display = 'none';
            gameContainer.style.display = 'block';
            generateProblem();
        });

        // "ë‹¨ ì„ íƒìœ¼ë¡œ" ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        resetButton.addEventListener('click', () => {
            gameContainer.style.display = 'none';
            settingsContainer.style.display = 'block';
            problemArea.textContent = '';
            resultMessage.textContent = '';
        });

        // ìƒˆ ë¬¸ì œë¥¼ ìƒì„±í•˜ê±°ë‚˜ ê¸°ì¡´ ë¬¸ì œë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
        function generateProblem(isNew = true) {
            if (isNew) {
                // ì„ íƒëœ ë‹¨ ì¤‘ì—ì„œ ë¬´ì‘ìœ„ë¡œ í•˜ë‚˜ë¥¼ ì„ íƒ
                const randomDanIndex = Math.floor(Math.random() * selectedDans.length);
                const num1 = selectedDans[randomDanIndex];
                // 1ë¶€í„° 9ê¹Œì§€ì˜ ìˆ˜ ë¬´ì‘ìœ„ ì„ íƒ
                const num2 = Math.floor(Math.random() * 9) + 1;
                
                currentProblem = { num1, num2 };
                currentAnswer = num1 * num2;
            }

            problemArea.textContent = `${currentProblem.num1} Ã— ${currentProblem.num2} = ?`;
            resultMessage.textContent = '';
            answerInput.value = '';
            answerInput.focus();
        }

        // ì •ë‹µì„ í™•ì¸í•˜ëŠ” í•¨ìˆ˜
        function checkAnswer() {
            const userAnswer = parseInt(answerInput.value, 10);

            if (userAnswer === currentAnswer) {
                resultMessage.textContent = "ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰";
                resultMessage.className = 'correct';
                // 1ì´ˆ í›„ì— ìƒˆë¡œìš´ ë¬¸ì œ ì¶œì œ
                setTimeout(() => generateProblem(true), 1000);
            } else {
                resultMessage.textContent = "í‹€ë ¸ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë„ì „í•˜ì„¸ìš”! ğŸ¤”";
                resultMessage.className = 'incorrect';
                // ì˜¤ë‹µ ì‹œ ì…ë ¥ì°½ë§Œ ë¹„ìš°ê³  ê°™ì€ ë¬¸ì œì— ë‹¤ì‹œ ë„ì „
                answerInput.value = '';
                answerInput.focus();
            }
        }
    </script>

</body>
</html>